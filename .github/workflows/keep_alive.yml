name: Wake Streamlit App
on:
  schedule:
    - cron: "0 */2 * * *" # Runs every 2 hours
  workflow_dispatch: # Allows manual trigger

jobs:
  wake_app:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo
        uses: actions/checkout@v2

      - name: Run Headless Browser to Wake App
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'

      - name: Install Selenium
        run: |
          pip install selenium webdriver-manager

      - name: Run Wake Script
        shell: python
        run: |
          from selenium import webdriver
          from selenium.webdriver.chrome.options import Options
          import time

          options = Options()
          options.add_argument('--headless')
          options.add_argument('--no-sandbox')
          options.add_argument('--disable-dev-shm-usage')

          driver = webdriver.Chrome(options=options)
          driver.get("https://aryanasignment-....streamlit.app") # YOUR URL HERE

          print("Page title:", driver.title)
          time.sleep(10) # Wait for page/buttons to load

          # Optional: Add logic here to find the 'wake up' button by text/ID and click it
          # Usually just loading the page with a browser driver is enough to trigger the wake-up 
          # unlike a simple curl request.

          driver.quit()
